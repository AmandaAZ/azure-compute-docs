---
title: Azure Service Fabric diagnose code package errors | Microsoft Docs
description: Learn how to troubleshoot common code package errors with Azure Service Fabric
services: service-fabric
documentationcenter: .net
author: grzuber
manager: gkhanna
editor: ''

ms.assetid:
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/09/2019
ms.author: grzuber

---

# Diagnose common code package errors with Service Fabric

This article describes what it means for a code package to terminate unexpectedly, and offers insight into possible causes of common error codes. It also provides troubleshooting steps that may help mitigate the issue.

## When does a process or container terminate unexpectedly?

When Service Fabric receives a request to start a code package, it begins preparing the environment on the local system according to the configuration options set in the App and Service manifests. These preparations may include reserving network endpoints or resources, configuring firewall rules, or setting up resource governance constraints. After the environment has been configured properly, Service Fabric tries to bring up the code package. This step is considered successful if the OS or container runtime reports that the process or container has been activated successfully. If activation is unsuccessful, you should see a health message in SFX that resembles the following:

```
There was an error during CodePackage activation. Service host failed to activate. Error: 0xXXXXXXXX
```

After the code package has been successfully activated, Service Fabric begins monitoring its lifetime. At this point, a process or container can terminate at any time for a number of reasons. It might've failed to initialize a DLL, the OS could've run out of desktop heap space, and so forth. If your code package terminated, you should see a health message in SFX that says the following:

```
The process/container terminated with exit code: XXXXXXXX. Please look at your application logs/dump or debug your code package for more details. For information about common termination errors, please visit https://aka.ms/service-fabric-termination-errors
```

The exit code provided in this health message is the only clue offered by the process/container about why it terminated, and this could've been generated by any level of the stack. It's difficult to understand if this exit code was related, for example, to an OS error or a .NET issue, or if it was raised by your code. Therefore, this article can be used as a starting point for diagnosing the source of termination exit codes and possible solutions. However, keep in mind that these are general solutions to common scenarios and may not apply to the error you're seeing.

## How can I tell if Service Fabric terminated my code package?

Service Fabric might be responsible for terminating your code package for a variety of reasons. For example, it may decide to place the code package on another node for load-balancing purposes. You can tell if your code package was terminated by Service Fabric if you see any of the exit codes in the following table.

>[!NOTE]
> If your process/container terminates with an exit code other than the codes in the following table, Service Fabric is not responsible for terminating it.

Exit code | Description
--------- | -----------
7147 | This indicates that Service Fabric gracefully shut down the process/container by sending it a Ctrl+C signal.
7148 | This indicates that Service Fabric terminated the process/container. Sometimes, this error code can indicate that the process/container didn't respond in a timely manner after sending a Ctrl+C signal, and so it had to be killed.


## Other common error codes and their potential fixes

Exit code | Hex value | Short description | Root cause | Potential fix
--------- | --------- | ----------------- | ---------- | -------------
3221225794 | 0xc0000142 | STATUS_DLL_INIT_FAILED | This error sometimes means that the machine has run out of desktop heap space. This cause is especially likely if you have a large number of processes belonging to your application running on the node. | If your program wasn't built to respond to Ctrl+C signals, you can enable the **EnableActivateNoWindow** setting in the Cluster manifest. Enabling this setting means your code package will run without a GUI window and won't receive Ctrl+C signals, but this will reduce the amount of desktop heap space each process consumes. If your code package needs to receive Ctrl+C signals, you can increase the size of your node's desktop heap.
3762504530 | 0xe0434352 | N/A | This value represents the error code for an unhandled exception from managed code (that is, .NET). | If you're seeing this exit code, it indicates that your application raised an exception that remains unhandled and that terminated the process. As the first step in determining what triggered this error, debug your application's logs and dump files.

## Next steps

* Learn more about [diagnosing other common scenarios](service-fabric-diagnostics-common-scenarios.md).
* Get a more detailed overview of Azure Monitor logs and what they offer by reading [What is Azure Monitor Logs?](../operations-management-suite/operations-management-suite-overview.md)
* Learn more about Azure Monitor logs [alerting](../log-analytics/log-analytics-alerts.md) for aid in detection and diagnostics.
* Get familiar with the [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Azure Monitor logs.
