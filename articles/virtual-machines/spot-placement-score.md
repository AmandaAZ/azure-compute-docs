---
title: Spot Placement Score
description: Learn how to use Azure Spot Virtual Machines to save on costs.
author: am4234m
ms.author: aparnamishra
ms.service: azure-virtual-machines
ms.subservice: azure-spot-vm
ms.topic: how-to
ms.date: 08/07/2024
ms.reviewer: ju-shim
---


# Spot Placement Score
Spot Placement Score will assist you by evaluating the likelihood of success for individual Spot deployments by considering parameters like desired Spot VM count, VM size, and your deployment region or zone. This feature enables you to generate a placement score to deploy a desired number of Spot VMs across various combinations of regions, zones and VM sizes. By inputting lists of up to 8 regions and 5 VM sizes, you can obtain placement scores categorized as either High, Medium or Low. A score of High indicates that the deployment is highly likely to succeed while a score of Low indicates that the deployment has a low chance of success. These scores are based on analyses of Spot capacity allocation probability and the survivability of the specified number of Spot VMs within each region and VM size combination. This functionality will enhance deployment planning by providing predictive insights into deployment success and optimizing resource allocation for your Spot VMs. 
 
Using Spot Placement Score, you can achieve the following: 

- A clear evaluation of how likely your Spot deployment is to succeed based on specified parameters. 

- Identify the most suitable combination of regions and VM sizes to maximize Spot VM availability and survivability based on placement scores. 

- Improve the overall success rate of deploying Spot VMs by leveraging data-driven placement scores, reducing the risk of capacity issues or failures during deployment. 


## Considerations

- Spot placement scores serve purely as a recommendation based on certain data points like eviction rate, VM availability etc. A high placement score does not guarantee that the Spot request will be fully or partially fulfilled. 

- Placement Scores are only valid at the time when it is requested. The same Placement Score is not valid at a different time of the same day or another day. Any similarities are purely coincidental.  

- Spot Placement Score will only be relevant if Spot request has the same configuration as the Spot placement score configuration (desired count, VM size, location and zone). In all other circumstances, the likelihood of getting available Spot capacity will not align with the placement score generated by the tool. 

- Spot Placement Scores currently do not consider additional constraints like VMSS “SinglePlacementGroup”. 

- Subscription’s available Spot VM quota will need to be checked and/or requested separately. 

- Spot Placement Score currently supports both regionally and zonally scoped placement score. 

- Spot Placement Score API internally calls other GET APIs and will be part of your GET call quota. 

- A score of High” or “Medium” does not guarantee allocation success or no evictions. 


## Configure your Spot Placement Score
You can configure Spot Placement Score by specifying your Spot specific requirements such as the desired number of Spot VMs, the VM size (up to 5), regions (up to 8) and availability zones. We recommend that the placement scores for each combination of subscription, desired count, region, zone, and VM size are cached, to avoid calling the API with the same configuration frequently within a short period of time. The suggested cache TTL is a minimum of 15 mins and a maximum of 30 mins. 

### [Portal](#tab/portal)

You can set your Spot Priority Mix in the Spot tab of the Virtual Machine Scale Sets creation process in the Azure portal. The following steps instruct you on how to access this feature during that process.

1.Log in to the  [Azure portal](https://portal.azure.com). 

1.In the search bar, search for and select **Virtual Machine Scale Sets**. 

1.Select **Create** on the **Virtual Machine Scale Sets** page. 

1.In the **Spot** tab, turn on Spot option under the **Save money with Spot** section. 

1.Fill out the Size, Region, Availability Zones and Initial instance count fields in the **Your Placement Score** section. 

1.Click on **Save + Apply** this configuration to receive your placement score. 

### [REST API](#tab/rest-api-1)

You can use the following REST API to get your Spot Placement Score. The Placement Score API supports the following versions: 2024-03-01-preview and 2024-06-01-preview. 

```
POST https://management.azure.com/subscriptions/{subscription}/providers/Microsoft.Compute/locations/{region}/placementScores/spot/generate?api-version={api-version} 
```

```json 
{ 

"desiredLocations": [" "], // Use ARM names 

"desiredSizes": [{ 

"sku": " " 

}], 

"desiredCount":  

} 

### [Azure CLI 2.0](#tab/cli-1)

You can use Spot Placement Score using Azure CLI by using the following:

az compute-recommender spot-placement-recommender [--availability-zones {0, 1, f, false, n, no, t, true, y, yes}]
                                                  [--desired-count]
                                                  [--desired-locations]
                                                  [--desired-sizes]
                                                  [--ids]
                                                  [--location]
                                                  [--subscription]

### [Azure PowerShell](#tab/powershell)

You can use Spot Placement Score using Azure PowerShell by utilizing the Invoke-AzSpotPlacementScore cmdlet to call the API endpoint. Replace <SubscriptionId>, <Location>, <DesiredCount>, <DesiredSize> and <AvailabilityZone> with your specific details:

Invoke-AzSpotPlacementScore 
      -Location <String> 
      [-SubscriptionId <String>] 
      [-AvailabilityZone] 
      [-DesiredCount <Int32>] 
      [-DesiredLocation <String[]>] 
      [-DesiredSize <IResourceSize[]>]


## Examples

The following examples have scenario assumptions, a table of results to help you understand how Spot Placement Score works.

Some important terminology to notice before referring to these examples:

- **sku.capacity** is the total number of VMs in the Virtual Machine Scale Set
- **Base (standard) VMs** are the number of standard non-Spot VMs, akin to a minimum VM number

### Scenario 1
Example of a request returning regionally scoped placement scores for multiple desired sizes and multiple desired regions.
 
The following scenario assumptions apply to this example:
- **Desired Locations:** westus", "eastus"
- **Desired Sizes":** Standard_D2_v2", Standard_D4_v2
- **Desired Count:** 100
- **Availability Zones:** False

| sku                               | region      | Availability Zone   | Is Quota Available? | Placement Score |
|-----------------------------------|-------------|---------------------|--------------------|-------------------|
| Standard_D2_v2                    | westus      | False                | True               | High             |
| Standard_D4_v2                    | westus      | False                | True               | Low              |
| Standard_D2_v2                    | eastus      | False                | True               | Medium           |
| Standard_D4_v2                    | eastus      | False                | True               | High             |

### Scenario 2
Example of a request returning zonally scoped placement scores for multiple desired sizes and multiple desired regions.
 
The following scenario assumptions apply to this example:
- **Desired Locations:** westus", "eastus"
- **Desired Sizes":** Standard_D2_v2", Standard_D4_v2
- **Desired Count:** 100
- **Availability Zones:** True

| sku                               | region      | Availability Zone   | Is Quota Available? | Placement Score |
|-----------------------------------|-------------|---------------------|--------------------|-------------------|
| Standard_D2_v2                    | westus      | 1                | True               | Medium           |
| Standard_D2_v2                    | westus      | 2                | True               | Medium             |
| Standard_D2_v2                    | westus      | 3               | True               | Medium           |
| Standard_D4_v2                    | westus      | 1                | True               | High             |
| Standard_D4_v2                    | westus      | 2               | True               | High             |
| Standard_D4_v2                    | westus      | 3               | True               | High             |
| Standard_D2_v2                    | eastus      | 1               | True               | Low           |
| Standard_D2_v2                    | eastus      | 2               | True               | Low             |
| Standard_D2_v2                    | eastus      | 3               | True               | Low           |
| Standard_D4_v2                    | eastus      | 1               | True               | Medium            |
| Standard_D4_v2                    | eastus      | 2               | True               | Medium           |
| Standard_D4_v2                    | eastus      | 3               | True               | Medium             |


## Troubleshooting

| Status Code                       | Type        | Condition  
|-----------------------------------|-------------|---------------------|--------------------|
| 200                               | OK          | Placement score generation operations complete successfully.             | 
| 400                               | Bad Error Request| If any required input parameters are not present or if the values of the provided parameters are invalid. There will be a detailed error message about the failed request.             |
| 429                    | Too Many Requests      | Unable to generate placement score due to hitting rate limit| 
| 500                   | Internal Server Error   | The placement score generation failed. The error message should have detailed error information.


